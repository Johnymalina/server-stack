http:
  routers:

    authelia:
      entryPoints:
        - web
      rule: Host(`auth.thehorde.page`)
      service: authelia

    homepage:
      entryPoints:
        - web
      middlewares:
        - force-https-header
        - authelia
      rule: Host(`home.thehorde.page`)
      service: homepage

    nas:
      entryPoints:
        - web
      rule: Host(`nas.thehorde.page`)
      service: nas

    hassio:
      entryPoints:
        - web
      rule: Host(`ha.thehorde.page`)
      service: hassio

    vaultwarden:
      entryPoints:
        - web
      rule: Host(`pass.thehorde.page`)
      service: vaultwarden

    gotify:
      entryPoints:
        - web
      rule: Host(`notify.thehorde.page`)
      service: gotify

    uptime:
      entryPoints:
        - web
      rule: Host(`uptime.thehorde.page`)
      service: uptime

    pairdrop:
      entryPoints:
        - web
      rule: Host(`drop.thehorde.page`)
      service: pairdrop

    jellyfin:
      entryPoints:
        - web
      rule: Host(`play.thehorde.page`)
      service: jellyfin

    audiobookshelf:
      entryPoints:
        - web
      rule: Host(`audio.thehorde.page`)
      service: audiobookshelf

    immich:
      entryPoints:
        - web
      rule: Host(`photos.thehorde.page`)
      service: immich

  services:

    authelia:
      loadBalancer:
        servers:
          - url: http://authelia:9091

    homepage:
      loadBalancer:
        servers:
          - url: http://homepage:3000

    nas:
      loadBalancer:
        servers:
          - url: http://42.42.20.3

    hassio:
      loadBalancer:
        servers:
          - url: http://42.42.20.4:8123

    vaultwarden:
      loadBalancer:
        servers:
          - url: http://vaultwarden:80

    gotify:
      loadBalancer:
        servers:
          - url: http://gotify:80

    uptime:
      loadBalancer:
        servers:
          - url: http://uptime:3001
  
    pairdrop:
      loadBalancer:
        servers:
          - url: http://pairdrop:3000
    
    jellyfin:
      loadBalancer:
        servers:
          - url: http://42.42.20.3:8096
    
    audiobookshelf:
      loadBalancer:
        servers:
          - url: http://42.42.20.3:13378

    immich:
      loadBalancer:
        servers:
          - url: http://42.42.20.3:6868

  middlewares:
    force-https-header:
      headers:
        customRequestHeaders:
          X-Forwarded-Proto: "https"

    authelia:
      forwardAuth:
        address: http://authelia:9091/api/verify?rd=https%3A%2F%2Fauth.thehorde.page%2F
        trustForwardHeader: true
        authResponseHeaders:
          - Remote-User
          - Remote-Groups
          - Remote-Name
          - Remote-Email

    authelia-basic:
      forwardAuth:
        address: http://authelia:9091/api/verify?auth=basic
        trustForwardHeader: true
        authResponseHeaders:
          - Remote-User
          - Remote-Groups
          - Remote-Name
          - Remote-Email
